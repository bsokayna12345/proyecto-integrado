{% extends 'administracion/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}
  Products  
{% endblock title %}


{% block link %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
{% endblock link %}


{% block content %}
{% block cesta %}
          
{% endblock cesta %}

<form  method="post" class="form-floating" action="{% url 'administracion:producto_new' %}">    
    {% csrf_token %}       
    <div class="card mt-5">
        <h5 class="card-title">Añadir Producto:</h5>
        <div class="card-body">                    
            <div class="row">
                <div class="col-md-3">
                    <div class="form-floating">                                    
                        {{form.categoria_id}}                        
                        <label for="{{form.categoria_id.id_for_label}}">{{form.categoria_id.label}}</label>
                        <h5 class="small">{{form.categoria_id.errors}} </h5>                  
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-floating">                                    
                        {{form.subcategoria_id}}                        
                        <label for="{{form.subcategoria_id.id_for_label}}">{{form.subcategoria_id.label}}</label>
                        <h5 class="small">{{form.subcategoria_id.errors}} </h5>                  
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="form-floating">
                        {{form.marca_id}}                        
                        <label for="{{form.marca_id.id_for_label}}">{{form.marca_id.label}}</label>
                        <h5 class="small">{{form.marca_id.errors}} </h5>                  
                    </div>
                </div>
            </div>
            <div class="row">                
                <div class="col-md-4">
                    <div class="form-floating">
                        {{form.nombre}}                        
                        <label for="{{form.nombre.id_for_label}}">{{form.nombre.label}}</label>
                        <h5 class="small">{{form.nombre.errors}} </h5>                  
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-floating">
                        {{form.unidades}}                        
                        <label for="{{form.unidades.id_for_label}}">{{form.unidades.label}}</label>
                        <h5 class="small">{{form.unidades.errors}} </h5>                  
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-floating">
                        {{form.precio}}                        
                        <label for="{{form.precio.id_for_label}}">{{form.precio.label}}</label>
                        <h5 class="small">{{form.precio.errors}} </h5>                  
                    </div>
                </div>                                           
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-floating">                                         
                        {{form.iva}}                        
                        <label for="{{form.iva.id_for_label}}">{{form.iva.label}}</label>
                        <h5 class="small">{{form.iva.errors}} </h5>                  
                    </div>
                </div>
                <div class="col-md-4 d-flex justify-content-center">
                    <label class="align-self-center" for="{{form.en_oferta.id_for_label}}">{{form.en_oferta.label}}</label>                                                                                                           
                    {{form.en_oferta}}                                                                                      
                    <h5 class="small">{{form.en_oferta.errors}} </h5>                                                             
                </div>  
                 <div class="col-md-4" id="id_porcentaje_div">                    
                    <label class="align-self-center" for="{{form.porcentaje.id_for_label}}">{{form.porcentaje.label}}</label>                                          
                    {{form.porcentaje}}                                              
                    <h5 class="small">{{form.porcentaje.errors}} </h5>                                  
                </div>    
            </div>                                  
        </div>
    </div> 
    <div class="card mt-2">                
            <div class="col-md-12">
                <div class="form-floating">                                      
                    {{form.desccripcion}}                        
                    <label for="{{form.desccripcion.id_for_label}}">{{form.desccripcion.label}}</label>
                            
                </div>
            </div>                     
    </div>
    
    <div class="card mt-2">
        <div class="row">
            <div class="form-actions" align="center">
                <button type="submit" class="col-md-2 btn btn-success" name="comando" value="guardar">Guardar</button>
                <a  class="col-md-2 btn btn-secondary" href="{% url 'administracion:producto_list' %}">
                    Volver
                </a>                                        
            </div>                                                                  
        </div>                
    </div>           
</form>

{% endblock content %}
{% block script %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="{% static 'administracion/js/select-ajax.js' %}"></script>
<script>
    var enOfertaCheckbox = document.getElementById('id_en_oferta');
    var porcentajeInput = document.getElementById('id_porcentaje_div');
    

    // Ocultar el campo de porcentaje inicialmente
    porcentajeInput.style.display = 'none';

    // Agregar un evento de escucha al checkbox "en oferta"
    enOfertaCheckbox.addEventListener('change', function() {
        // Si el checkbox está marcado, mostrar el campo de porcentaje; de lo contrario, ocultarlo
        if (this.checked) {
            porcentajeInput.style.display = 'block';           
        } else {
            porcentajeInput.style.display = 'none';
        }
    });
</script>
{% endblock script %}
  
  
  

  